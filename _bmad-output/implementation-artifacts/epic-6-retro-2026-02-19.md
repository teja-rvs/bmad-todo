# Epic 6 Retrospective — SPA behavior and error feedback

**Date:** 2026-02-19  
**Epic:** 6 — SPA behavior and error feedback  
**Project:** bmad-todo  
**Facilitator:** Bob (Scrum Master)

---

## 1. Epic summary and metrics

| Metric | Value |
|--------|--------|
| Total stories | 2 |
| Completed | 2 |
| Completion | 100% |
| Blockers | 0 |
| Technical debt items (called out) | 0 |

**Stories delivered:**
- 6.1 — SPA behavior: no full-page reloads for core flows
- 6.2 — Error feedback: service unavailable and retry

**Business outcomes:** The app behaves as an SPA (add/complete without full-page reload) and surfaces clear feedback when the service is unavailable (FR24, FR25, NFR-R2). Guardrail tests (unit + e2e) for SPA and error/retry in place.

---

## 2. Deep story analysis — patterns

### 2.1 Dev notes and implementation

- **6.1:** Frontend-only; verification that AddRow uses `preventDefault()`, App uses `createTask`/`updateTask` and state updates; no full-page navigation. Documented SPA data strategy; added unit tests (AddRow, TaskRow) and e2e "no full-page reload" (navigation count stays 1). Code review: file list, AddRow test assert preventDefault, e2e same-document guard.
- **6.2:** Frontend-only; unified user-facing messages (LOAD_ERROR_MESSAGE, SAVE_SERVICE_UNAVAILABLE); single "Try again" and retry path for load/create/complete via `lastFailedAction` and `handleRetry`. Unit and e2e for error message and retry. Code review: GET 4xx uses LOAD_ERROR_MESSAGE (NFR-R2); added complete-retry unit test.

### 2.2 Review feedback patterns

- **Error handling:** Code review caught GET 4xx not using the same user-facing message as NFR-R2; fixed before done.
- **Testing:** Complete-retry path had no unit test until review; added in code review. Pattern: explicit "retry-path" and "error consistency" in DoD would reduce review churn.

### 2.3 Lessons learned

1. **Verification-first** — 6.1 was mostly verification and guardrail tests; implementation was already correct. Scope stayed small.
2. **Reuse** — 6.2 built on 6.1 (same API layer, App state, e2e/Vitest). No rework.
3. **Code review value** — 4xx messaging and retry test coverage were improved in review. DoD can encode these so they’re done before review.

### 2.4 Technical debt and testing

- **Technical debt:** None called out.
- **Testing:** Unit tests for AddRow, TaskRow, App, api/tasks; e2e for SPA no-reload and error + Try again. All passing.

---

## 3. Previous retrospective follow-through (Epic 5)

| Commitment (Epic 5) | Epic 6 follow-through |
|---------------------|------------------------|
| E2E and a11y in DoD; file lists and completion notes | ✅ E2e for SPA and error/retry; story files have file lists and completion notes |
| Code review before done | ✅ Both 6-1 and 6-2 had code review before done |
| Update contrast/a11y docs when palette changes | N/A (no palette changes in Epic 6) |
| No new technical debt | ✅ No new debt from Epic 6 |

**Conclusion:** Epic 5 commitments were followed. No unaddressed action items carried into Epic 6.

---

## 4. Next epic preview

Epic 7 is not defined in the planning artifacts. No dependencies or preparation tasks to record. Lessons from this retro apply when the next epic is planned.

---

## 5. Action items and commitments

### Process

1. **DoD: retry-path test coverage**  
   For stories that add or change retry behavior, ensure all retry paths (load, create, complete) have at least one unit or e2e test before marking done.  
   Owner: Dev / QA. Success: No code review finding of "missing retry-path test."

2. **DoD: user-facing error consistency**  
   For any story touching API errors, confirm all failure paths (4xx, 5xx, network, timeout) use agreed user-facing messages (e.g. NFR-R2).  
   Owner: Dev. Success: Review does not flag error-message inconsistency.

### Technical

- No new technical debt from Epic 6.

### Documentation

- No new documentation action items.

### Team agreements

- Keep code review before done.
- Keep e2e (app + a11y where relevant) and file lists in DoD.

---

## 6. Readiness assessment

| Area | Status |
|------|--------|
| Testing & quality | E2E and unit in place for SPA and error/retry; all passing. |
| Deployment | Not run in this retro; per project, deploy TBD. |
| Stakeholder acceptance | Per PRD, personal use; no formal sign-off required for MVP. |
| Technical health | Stable; frontend-only; no regressions. |
| Unresolved blockers | None. |

**Conclusion:** Epic 6 is complete from a story and quality perspective. No critical path items (no next epic defined).

---

## 7. Key takeaways

1. **Verification-first and reuse** — 6.1 verified and tested; 6.2 built on the same patterns. Kept scope tight and avoided rework.
2. **Code review improved outcomes** — 4xx messaging and retry test coverage were fixed in review. Making error consistency and retry tests explicit in DoD will help.
3. **Epic 6 is complete** — SPA behavior and error feedback are implemented and guarded by tests. No significant discoveries requiring epic re-plan.

---

**Retrospective complete.**  
Next: When Epic 7 (or later) is defined, use this retro for planning and DoD. Ensure action items above are reflected in story workflow.
