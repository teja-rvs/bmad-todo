# Epic 2 Retrospective — Create tasks

**Date:** 2026-02-18  
**Epic:** 2 — Create tasks  
**Project:** bmad-todo  
**Facilitator:** Bob (Scrum Master)

---

## 1. Epic summary and metrics

| Metric | Value |
|--------|--------|
| Total stories | 2 |
| Completed | 2 |
| Completion | 100% |
| Blockers | 0 |
| Technical debt items (called out) | 0 |

**Stories delivered:**
- 2.1 — Backend: POST /tasks to create a task
- 2.2 — Frontend: add-task flow and show new task in list

**Business outcomes:** User can add a task (enter text, confirm via Enter or Add button) and see the new task at the top of the list without refresh; tasks are persisted on the server (FR8–FR12). Ready for Epic 3 (complete tasks).

---

## 2. Deep story analysis — patterns

### 2.1 Dev notes and implementation

- **2.1:** POST /tasks with 201 and 422; strong params, consistent error shape. Code review added: CORS test for POST, null/numeric title cases, malformed JSON → 400 via ApplicationController rescue.
- **2.2:** createTask in API layer; AddRow controlled (onSubmit, clear, focus). Code review: error parsing for `errors[]` shape, 201 normalized to full Task, aria-describedby for error association, App create-flow tests and E2E.

### 2.2 Review feedback patterns

- **API and errors:** Consistent error shape, edge cases (null title, coercion, malformed JSON), CORS covered in tests.
- **Frontend:** Error parsing for different backend shapes; accessibility (error association); test coverage for create flow (unit + E2E).
- **Scope:** Backend-only 2.1, frontend-only 2.2; no scope creep.

### 2.3 Lessons learned

1. **Error contract alignment** — Backend and frontend must agree on error shape (single key vs array); document and parse consistently to avoid rework.
2. **Code review value** — Edge cases and accessibility (e.g. aria-describedby) were caught in review in both stories.
3. **Merge strategy** — Prepend from 201 response used consistently; no refetch needed for create.
4. **E2E practice** — Stopping local servers before running E2E tests keeps runs deterministic and avoids port/env conflicts; aligns with Epic 1 E2E patterns.

### 2.4 Technical debt and testing

- **Technical debt:** None blocking. Story files retain `{{agent_model_name_version}}` placeholders (optional to replace).
- **Testing:** Backend integration tests (POST success, validation, CORS, malformed JSON). Frontend unit tests (createTask, AddRow, App create flow) and E2E add-task flow. Coverage maintained for new code.

---

## 3. Previous retrospective follow-through (Epic 1)

| Action item | Owner | Status | Evidence |
|-------------|--------|--------|----------|
| E2E patterns (mocked API / determinism) | Dev/QA | ✅ Completed | E2E for add-task flow; same pattern as Epic 1 |
| Story completion notes and file lists | Dev | ✅ Completed | 2.1 and 2.2 both have Completion Notes and File List |
| Unit test coverage (100% for new code) | Dev | ✅ Completed | Integration + unit + E2E for Epic 2 stories |

All three Epic 1 action items completed. Team agreements (framework patterns, code review before done, enforce coverage) were followed.

---

## 4. Next epic preview — Epic 3: Complete tasks

**Epic 3 objective:** User can mark a task complete from the list and see the updated state, persisted on the server (FR13–FR15).

**Stories:** 3.1 Backend PATCH /tasks/:id (done), 3.2 Frontend mark complete and show updated state (backlog).

**Dependencies on Epic 2:** POST /tasks and add-task flow in place; API and frontend patterns (merge, error handling, api/tasks.ts) established. No additional preparation required; Epic 3.2 can proceed using same patterns.

**Risks / unknowns:** None identified.

---

## 5. Action items and commitments

### Process

1. **E2E practice — stop servers before E2E**  
   - **Action:** Stop local servers before running E2E tests; continue using mocked API (or similar) where it improves determinism.  
   - **Owner:** Dev / QA  
   - **Success:** E2E runs are consistent; no port/env conflicts.

2. **Story completion notes and file lists**  
   - **Action:** Keep completion notes and file lists in story markdown when marking stories done.  
   - **Owner:** Dev  
   - **Success:** Epic 3 stories updated with completion notes and file list when done.

3. **Unit test coverage**  
   - **Action:** For every story, add unit tests for all new or changed code; run frontend coverage before sign-off; maintain 100% line coverage for included source.  
   - **Owner:** Dev  
   - **Success:** No story marked done without tests for added code.

### Technical

4. **API error contract alignment**  
   - **Action:** Keep error shape (e.g. `{ error: "..." }` / `{ errors: [...] }`) explicit in architecture and stories; ensure frontend parsing handles agreed variants.  
   - **Owner:** Dev  
   - **Success:** No rework in Epic 3 due to error-shape mismatch.

### Team agreements

- Continue E2E practice: stop servers before E2E; use mocks where appropriate.
- Run code review before marking stories done.
- Enforce unit test coverage for new code; run coverage before sign-off.

---

## 6. Epic 3 preparation tasks

| Task | Owner | Notes |
|------|--------|--------|
| Implement 3.2 — Frontend mark complete and show updated state | Dev | Wire checkbox to PATCH /tasks/:id; refetch or merge; same patterns as 2.2 |
| Add/update tests for complete flow | Dev/QA | Backend already covered in 3.1; frontend unit + E2E for mark complete |
| Run coverage before story sign-off | Dev | Per retro agreement |

No separate prep sprint; Epic 3.2 can start when picked up.

---

## 7. Critical path

- **Before Epic 3.2:** No blockers. Epic 2 complete; POST /tasks and add-task flow stable.
- **Priority:** Complete Story 3.2 (frontend mark complete).

---

## 8. Significant discoveries / epic updates

**No significant discoveries** that require changing the plan for Epic 3. Architecture and approach remain valid; error-shape alignment is a process improvement, not a scope change.

---

## 9. Readiness assessment

| Area | Status |
|------|--------|
| Testing & quality | Backend and frontend tests in place; E2E add-task flow; coverage maintained |
| Deployment | Not in scope for this retro |
| Stakeholder acceptance | N/A (internal/spike) |
| Technical health | Codebase stable; patterns clear; no unresolved blockers |
| Unresolved blockers | None |

Epic 2 is **complete** from a story and readiness perspective. Team can proceed to Epic 3.2 when ready.

---

## 10. Retrospective closure

**Key takeaways:**

1. **Stopping local servers before E2E** — Keeps E2E runs deterministic; continue as standard practice.
2. **Error contract alignment** — Document and implement backend and frontend error shape together to avoid rework.
3. **Epic 1 follow-through** — All three action items completed; E2E patterns, completion notes, and coverage upheld.
4. **Code review** — Continued to catch edge cases and accessibility improvements in both stories.

**Commitments:** 4 action items (E2E practice, completion notes, coverage, error contract alignment); no critical path blockers. Next step: implement Epic 3.2 (frontend mark complete) with same patterns and coverage bar.

---

*End of Epic 2 retrospective.*
